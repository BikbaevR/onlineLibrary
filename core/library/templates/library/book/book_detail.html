{% extends 'library/includes/base.html' %}

{% block title %}Книги{% endblock title %}

{% block main %}

<h1>{{ book.title }}</h1>
<p>Автор: {{ book.author }}</p>
<p>Год: {{ book.year }}</p>
<p>Цена: {{ book.price }}</p>
<p>Описание: {{ book.description }}</p>
<p>Рейтинг: {{ book.rating }}</p>
<p>Страниц: {{ book.pages }}</p>
<p>Жанры:
    {% for genre in book.genres.all %}
        {{ genre.name }}{% if not forloop.last %}, {% endif %}
    {% endfor %}
</p>
<img src="{{ book.image.url }}" alt="{{ book.title }}">

    
{% if user.is_authenticated %}
    <form action="{% url 'buy_book' book.id %}" method="post">
      {% csrf_token %}
      <button type="submit">Купить книгу</button>
    </form>

    <form action="{% url 'add_to_favorites' book.id %}" method="post">
      {% csrf_token %}
      <button type="submit">Добавить в избранное</button>
    </form>
{% else %}
    <p>Вы должны быть авторизованы для покупки или добавления в избранное.</p>
{% endif %}

<div class="form__button_block">
    <a class="button" href="{% url 'book_update' book.id %}">Редактировать</a>
    <a class="button" href="{% url 'book_delete' book.id %}">Удалить</a>
    <a class="button" href="{% url 'book_list' %}">Назад к списку</a>
</div>


{% endblock main %}